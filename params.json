{"name":"Lineclappe.GitHub-io","tagline":"酱油少年的博客","body":"#字幕制作之压制视频\r\n\r\n\r\n[TOC]\r\n## 准备工作\r\n### 何为压制\r\n\r\n 压制就是将外挂字幕和视频进行合并的过程。一般常见的外挂字幕的类型有srt字幕和ass字幕。视频的格式种类就比较多了，比如mkv，mp4，avi等。对于不同格式的压制，我们使用的方法都是一样的。\r\n\r\n###软件安装\r\n首先我们得安装必备的软件。一个是解码器，一个是压制软件。解码器我们推荐[完美解码](http://download.pchome.net/multimedia/media/detail-22131.html)。安装时候默认安装即可。压制软件推荐[Megui](http://sourceforge.net/projects/megui/)。Megui下载后解压就可以直接用了。\r\n另外我们推荐安装[neroaac](http://www.nero.com/chs/company/about-nero/nero-aac-codec.php)的音频插件，这样方便我们压制aac格式的音频文件。安装完以后，把下图所示的三个文件移动到Megui解压文件夹中的.\\tools\\eac3to\\中。然后我们打开Megui，菜单栏里面点击Options->Settings。选择External Program Configuration，点击Enable NeroAacEnc，找到刚才复制到对应文件夹的exe文件。这样重启软件之后就可以进行对应aac文件的压制了。\r\n![文件](http://img.blog.csdn.net/20151031211150174)\r\n\r\n\r\n##AVS制作\r\n###脚本制作\r\n压制视频需要用avs作为脚本调用视频和音频。avs脚本的制作我们可以简单的用Megui来完成。点击菜单栏的Tools-> AVS script creator,如图2所示。\r\n![图2](http://img.blog.csdn.net/20151031211652123)\r\n\r\n在Video Input中找到我们要调入的视频文件，弹出对话框如下图。\r\n![图3](http://img.blog.csdn.net/20151031215433519)\r\n\r\n我们点击DirectShowSource进行编辑。上面有三个子菜单，I/O,Filters以及Script。Script是最终的AVS脚本，我们可以在这里进行代码的手写。I/O这里可以对输入的视频进行一定的处理，比如修改分辨率，切边等等。Filters这个子菜单下，我们可以对视频进行[视频反交错](http://wxrsm.blog.sohu.com/244835440.html)。一般对于比较古老的视频，比如360i的，480i的视频，需要进行反交错处理。而对于新视频并不需要这么做。在Filters子菜单下，我们还可以进行字幕加载。\r\n![图4](http://img.blog.csdn.net/20151031211952162)\r\n\r\n下面我们只执行最简单的操作，即给视频加上字幕，而不进行其他的操作。我们点击filters子菜单，点击subtitles。输入字幕后直接点击保存。\r\n![图5](http://img.blog.csdn.net/20151031212517198)\r\n\r\n出现以下图片说明加载成功。\r\n![图6](http://img.blog.csdn.net/20151031212627109)\r\n\r\n我们关掉这个画面，至此，最简单的AVS脚本已经制作完毕了。\r\n\r\n##视频压制\r\n###总述\r\n有了脚本以后我们可以进行视频的压制。视频的压制分为三个部分，视频压制，音频压制以及视频音频的合并。而Megui的主界面上下正好分成了视频部分和音频部分。\r\n![图6](http://img.blog.csdn.net/20151031213239005)\r\n###视频压制\r\n视频部分我们在Avisynth Script部分导入刚才做好的avs脚本。接下来选择Encoder Settings和File format里的选项。Encoder Settings里可以选择编码的方式，一般我们选择x264.File Format可以选择mkv或者mp4，这个主要看个人的喜好了，两个都是很好的格式。然后我们点击config，出现下图。\r\n![图7](http://img.blog.csdn.net/20151031213607288)\r\n\r\n注意，一定要在show advanced settings处打上钩。主要要调整的是Encoding Mode和Bitrate两个选项。Encoding Mode一般选择ABR或者Automated 2 pass两种。ABR的话只会编码一次，2 pass会编码两次。选择2 pass会花比第一种多一倍多的时间获得更好的视频质量。而Bitrate决定了视频的质量。一般720p的比特率在3000左右，压制480p的话800的参数足够。压制人人影视的1024*576分辨率的视频的话，比特率1500足矣。一般来说，视频压制的比特率要小于等于原始视频的比特率。这些选好以后点击ok。\r\n\r\n###音频压制\r\n音频部分，在audio input里打开视频文件（注意：不是avs文件，因为avs默认禁止音频）。然后Encoder Settings找到Nero AAC:\\*scratchpad*。点击config。\r\n![图9](http://img.blog.csdn.net/20151031214218724)\r\n\r\n\r\n音频也有对应的比特率。可以直接点variable bitrate，也可以选择上面的adaptive bitrate和constant bitrate。我一般选择adaptive bitrate。而音频的比特率设置可以这么参考，高质量MP3的比特率是320，一般MP3（qq音乐上下载的）的比特率就120。设置完以后点击ok。\r\n###视频音频合并\r\n下面进行视频和音频的合并。合并有两个方案。\r\n- **方案1**：音频和视频分别点击queue。\r\n![图10](http://img.blog.csdn.net/20151031214529683)\r\n然后菜单栏Tools->Muxer->Mkv Muxer\r\n![图11](http://img.blog.csdn.net/20151031214646350)\r\n分别在video和audio处导入音频，最后在底下点queue即可。这个方法的优点是可以进行多音频轨道的封装。\r\n-**方案2**：一键自动化处理。点击AutoEncode按钮。\r\n![图12](http://img.blog.csdn.net/20151031214937999)\r\n在No Target Size处选中，点queue以后系统就可以自动化的帮你先压音频，再压视频，最后合并了。","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}